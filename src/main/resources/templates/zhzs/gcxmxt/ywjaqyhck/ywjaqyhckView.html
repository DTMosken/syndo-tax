<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<meta charset="utf-8">
<head>
    <th:block th:include="include :: layui-header('域外建安企业核查库')"/>
    <style type="text/css">
        .layui-card-header {
            height: auto;
        }
    </style>
</head>

<body class="layui-body-table">
<div class="layui-card">
    <div class="layui-card-header">
        <form id="query-form" class="layui-form">
            <div class="layui-form-item layui-row">
                <div class="layui-inline layui-col-sm6 layui-col-md3">
                    <label class="layui-form-label">项目名称：</label>
                    <div class="layui-input-block">
                        <input type="text" id="xmmc" name="xmmc" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-inline layui-col-sm6 layui-col-md3">
                    <label class="layui-form-label">建设单位：</label>
                    <div class="layui-input-block">
                        <input type="text" id="jsdw" name="jsdw" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-inline layui-col-sm6 layui-col-md3">
                    <label class="layui-form-label">施工单位：</label>
                    <div class="layui-input-block">
                        <input type="text" id="sgdw" name="sgdw" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-inline layui-col-sm6 layui-col-md3">
                    <label class="layui-form-label">所属年度:</label>
                    <div class="layui-input-block">
                        <div class="layui-col-sm5">
                            <input type="text" id="ssnd" name="ssnd" th:value="${ssnd}"
                                   readonly="readonly" autocomplete="off"
                                   data-type="month" data-format="yyyy-MM"
                                   class="layui-input time-input">
                        </div>
                    </div>
                </div>
                <div class="layui-inline layui-col-sm6 layui-col-md3">
                    <label class="layui-form-label">数据来源：</label>
                    <div class="layui-input-block">
                        <select id="sjly" name="sjly" th:with="type=${@dict.getType('dm_ml')}"
                                title="请选择" class="selectpicker form-control input-sm">
                            <option value=""></option>
                            <option th:each="dict : ${type}" th:text="${dict.dictLabel}"
                                    th:value="${dict.dictLabel}"></option>
                        </select>
                    </div>
                </div>
            </div>


            <div class="layui-form-item layui-row">
                <div class="layui-inline layui-col-sm6 layui-col-md3">
                    <label class="layui-form-label">所属街镇：</label>
                    <div class="layui-input-block">
                        <select id="ssjz" name="ssjz" th:with="type=${@dict.getType('dm_ml')}"
                                title="请选择" class="selectpicker form-control input-sm">
                            <option value=""></option>
                            <option th:each="dict : ${type}" th:text="${dict.dictLabel}"
                                    th:value="${dict.dictLabel}"></option>
                        </select>
                    </div>
                </div>
                <div class="layui-inline layui-col-sm6 layui-col-md3">
                    <label class="layui-form-label">忽略选项：</label>
                    <div class="layui-input-block">
                        <select id="hlxx" name="hlxx"
                                title="请选择" class="selectpicker form-control input-sm">
                            <option value=""></option>
                            <option value="0">未忽略</option>
                            <option value="1">已忽略</option>
                        </select>
                    </div>
                </div>
                <div class="layui-inline layui-col-sm6 layui-col-md4">
                    <div class="layui-form-btn" style="text-align: left;padding-left: 30px;">
                        <button type="button" class="layui-btn layui-btn-radius layui-btn-sm layui-btn-normal"><i class="layui-icon">&#xe609;</i>&nbsp;&nbsp;推送</button>
                        <button type="button" class="layui-btn layui-btn-radius layui-btn-sm layui-btn-normal"><i class="layui-icon">&#xe639;</i>&nbsp;&nbsp;忽略</button>
                        <a class="layui-btn layui-btn-normal layui-btn-sm" onclick="$.table.search()"><i
                                class="layui-icon">&#xe615;</i>&nbsp;搜索</a>
                        <a class="layui-btn layui-btn-normal layui-btn-sm" onclick="$.table.reset()"><i
                                class="layui-icon">&#xe669;</i>&nbsp;重置</a>
                    </div>
                </div>
            </div>

        </form>
    </div>
    <div class="layui-card-body">
        <table id="layui-table" lay-filter="layui-table"></table>
    </div>
</div>

<th:block th:include="include :: layui-footer"/>
<script type="text/javascript">

    var prefix = ctx + "zhzs/gcxmxt/ywjaqyhck";

    $(function () {
        var options = {
            id: 'layui-table',
            url: prefix + "/list",
            exportUrl: prefix + "/expExcel",
            title: '域外建安企业核查库列表',
            showExport: true,
            height: 'full-65',
            ataType: "json",
            limit: 50,
            cols: [
                [
                    {
                        field: 'tszt',
                        title: '推送状态',
                        width: 160,
                        fixed: 'left',
                        align: 'center',
                        style: 'text-align: left'
                    },
                    {
                        field: 'xmmc',
                        title: '项目名称',
                        width: 160,
                        fixed: 'left',
                        align: 'center',
                        style: 'text-align: left'
                    },
                    {field: 'xmzt', title: '项目状态', width: 140, align: 'center', style: 'text-align: right'},
                    {field: 'xmdz', title: '项目地址', width: 140, align: 'center', style: 'text-align: right'},
                    {field: 'jsdz', title: '建设地址', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'zbdw', title: '中标单位（核查对象）', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'gszt', title: '工商注册', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'swdj', title: '税务登记', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'fgsmc', title: '分公司名称', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'xmje', title: '项目金额（元）', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'lxr', title: '联系人', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'lxdh', title: '联系电话', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'sjyf', title: '数据月份', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'kgzbsj', title: '开工/中标时间', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'sjly', title: '数据来源', width: 130, align: 'center', style: 'text-align: right'},
                    {field: 'ssjz', title: '所属镇街', width: 130, align: 'center', style: 'text-align: right'},
                    {
                        title: '操作',
                        width: '180',
                        align: 'center',
                        formatter: function(value, row, index) {
                            var actions = [];
                            actions.push('<a class="btn btn-success btn-xs" href="javascript:void(0)" onclick="tuisong(\'' + row.userId + '\')"><i class="fa fa-edit"></i>推送</a> ');
                            actions.push('<a class="btn btn-danger btn-xs" href="javascript:void(0)" onclick="hulue(\'' + row.userId + '\')"><i class="fa fa-remove"></i>忽略</a> ');
                            return actions.join('');
                        }
                    },
                    {field: 'qygtqk', title: '企业沟通情况', width: 130, align: 'center', style: 'text-align: right'}
                ]
            ]
        };
        $.table.init(options);
    });

    function tuisong(rowId){
        alert(rowId);
    }

    function hulue(rowId){
        alert(rowId);
    }

    layui.use('laydate', function () {
        var laydate = layui.laydate;
        laydate.render({elem: '#ssnd', type: 'month', format: 'yyyy-MM'});
    });
</script>
<style>
    .layui-col-md3 {
        width: 20%;
    }
</style>
</body>
</html>