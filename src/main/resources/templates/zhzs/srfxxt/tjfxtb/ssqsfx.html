<!DOCTYPE HTML>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<meta charset="utf-8">
<head>
	<th:block th:include="include :: header('税收趋势分析')" />
</head>
<body class="gray-white">
     <div class="container-div">
		<div class="row">
		
			<div class="col-sm-12 select-table table-striped">
				<!-- <table id="bootstrap-table" data-mobile-responsive="true"></table> -->
				<div style="display:block;width:100%;height:400px;" class="chart-div" id="ssqsfxChart" ></div>
			</div>
		</div>
	</div>
    <th:block th:include="include :: footer" />
    <script th:src="@{/ajax/libs/echarts/echarts.min.js?v=4.7.0}"></script>
	<script th:src="@{/ajax/libs/echarts/theme/custom.js?v=1.0.0}"></script>
    <script th:inline="javascript">
        var prefix = ctx + "zhzs/srfxxt/tjfxtb/ssqsfx";

        $(function() {
        	var ssqsfxChart = echarts.init(document.getElementById("ssqsfxChart"))
        	ssqsfxChart.showLoading();
        	$.ajax({
				type : "post",
				async : true,	//异步请求
				url : prefix + '/list',
				data : {},
				dataType : "json",
				success : function(result) {
					//请求成功时执行该函数内容，result即为服务器返回的json对象
					console.log(result.rq)
					console.log(result.zsr)
					console.log(result.dfsr)
					if (result) {
						ssqsfxChart.setOption({      //加载数据图表
	                        tooltip: {trigger: "axis"},
	                        legend: {
	                            data:['总税额','地方税额']
	                        },
	                        toolbox: {
	                            show : true,
	                            feature : {
	                                dataView : {show: true, readOnly: false},
	                                magicType : {show: true, type: ['line', 'bar']},
	                                restore : {show: true},
	                                saveAsImage : {show: true}
	                            }
	                        },
	                        calculable : true,
	                        grid: {
	    						x: 45,
	    						x2: 60,
	    						y:35,
	    						y2: 20
	    					},
	                        xAxis: {
	                        	type : 'category',
	                            data: ['2019-04','2019-05','2019-06','2019-07','2019-08','2019-09','2019-10','2019-11','2019-12','2020-01','2020-02','2020-03'],
/* result.rq */
	                        },
	                        yAxis: {
	                        	name: '万元',
	                            type: 'value'
	                        },
	                        series: [{
	                            name: '总税额',
	                            type: 'line',
	                            data: [44911.08,28626.98,16351.9,37568.95,21319.79,21563.63,34548.56,24989.93,27132.48,0,0,0],
	    						markLine: {
	    							data: [
	    								{type: 'average', name: '平均值'}
	    							]
	    						}
	                        },
	                        {
	                            name: '地方税额',
	                            type: 'line',
	                            data: [23598.13,13185.92,9764.84,21386.84,7984.51,9660.17,19224.74,10302.45,11502.9,0,0,0],
	    						markLine: {
	    							data: [
	    								{type: 'average', name: '平均值'}
	    							]
	    						}
	                        }]
	                    });
						ssqsfxChart.hideLoading();
					}

				},
				error : function(errorMsg) {
					//请求失败
					$.modal.msgError("图表请求数据失败!");
					ssqsfxChart.hideLoading();
				}
			})
        });
    </script>
</body>
</html>